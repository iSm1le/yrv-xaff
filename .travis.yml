language: node_js
node_js:
- '9'
dist: trusty
sudo: false
cache:
  directories:
  - node_modules
addons:
  apt:
    sources:
    - git-core
    packages:
    - git
before_install:
- sudo apt-get update
install: npm install
jobs:
  include:
  - stage: test
    script: bash ./.travis/test.sh
  - stage: deploy
    script: bash ./.travis/deploy.sh
stages:
- test
- name: deploy
  if: branch = production
script: skip
after_success:
- bash deploy.sh
dd:
- openssl aes-256-cbc -K $encrypted_c3355765ee6c_key -iv $encrypted_c3355765ee6c_iv
  -in id_rsa.enc -out .travis/id_rsa -d
